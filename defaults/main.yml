---
# General parameters #
consul_is_install: false
consul_datacenter: 'dc01'
consul_domain: 'local'
consul_node_role: 'client'
consul_version: '1.5.1'
consul_hashiui_is_install: false
consul_hashiui_version: '1.0.1'
consul_path:
  conf: '/etc/consul'
  data: '/data/consul'
  backup: '/data/consul_backup'
consul_join_servers:
  - '1.1.1.1'
  - '1.1.1.2'
  - '1.1.1.3'

# Service Mesh #
environments: 'SIT' # Define the service environment.
exporter_is_install: false # Whether to install prometheus exporter.
consul_public_register: false # Whether register a exporter service with public consul client.
consul_public_exporter_token: '00000000-0000-0000-0000-000000000000' # Public Consul client ACL token.
consul_public_http_port: '8500' # The consul HTTP API port.
consul_public_clients: # List of public consul clients.
  - '127.0.0.1'

# Listen port #
consul_port_arg:
  dns: '53'
  dns_interface: '8600'
  exporter: '9107'
  hashiui: '3001'
  http: '8500'
  serf_lan: '8301'
  serf_wan: '8302'
  server: '8300'

# Consul System Variables #
consul_arg:
  ca_file: 'certificate.pem'
  cert_file: 'certificate.pem'
  dns_allow_stale: true
  dns_max_stale: '10s'
  enable_local_script_checks: true
  enable_script_checks: true
  enable_syslog: true
  encrypt: 'i+9cwfvqtD6hw8XVKzONAw==' # Create by consul keygen
  encrypt_verify_incoming: true
  encrypt_verify_outgoing: true
  https: false
  key_file: 'server.key'
  log_level: 'WARN'
  raft_protocol: '3'
  uid: '2011'
  ulimit_nofile: '20480'
  ulimit_nproc: '20480'
  user: 'consul'
  verify_incoming: false
  verify_incoming_https: false
  verify_outgoing: false
  verify_server_hostname: false

# ACL Variables #
consul_acl_arg:
  enabled: true
  datacenter: '{{ consul_datacenter }}'
  default_policy: 'deny'
  down_policy: 'extend-cache'
  enable: true
  master_token: '7471828c-d50a-4b25-b6a5-d80f02a03bae'
  ttl: '30s'

# DNS Variables #
consul_recursors:
  - '223.5.5.5'
  - '223.6.6.6'
  - '8.8.8.8'

# Performance #
consul_performance:
  leave_drain_time: 5s
  raft_multiplier: 3
  rpc_hold_timeout: 7s

# DNS TTL #
consul_dns_service_ttl:
  '*': 60s
  web: 30s
  app: 30s
  dbs: 5s
